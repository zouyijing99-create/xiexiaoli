<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APIé…ç½® - èŠ‚èƒ½å°å±‹è®¾è®¡å¸ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="config.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #2D7D32;
            --secondary-green: #4CAF50;
            --tech-blue: #1976D2;
            --neutral-gray: #424242;
            --light-green: #E8F5E8;
            --light-blue: #E3F2FD;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #E8F5E8 0%, #E3F2FD 100%);
            min-height: 100vh;
        }
        
        .hero-title {
            font-family: 'Noto Serif SC', serif;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-green), var(--tech-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .config-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(45, 125, 50, 0.2);
            transition: all 0.3s ease;
        }
        
        .config-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(45, 125, 50, 0.2);
        }
        
        .api-card {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .api-card:hover {
            border-color: var(--secondary-green);
            transform: scale(1.02);
        }
        
        .api-card.active {
            border-color: var(--primary-green);
            background: rgba(76, 175, 80, 0.05);
        }
        
        .nav-link {
            transition: all 0.3s ease;
            position: relative;
        }
        
        .nav-link:hover {
            color: var(--primary-green);
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-green);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--secondary-green);
            border-radius: 50%;
            opacity: 0.6;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-connected {
            background: #4CAF50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        .status-disconnected {
            background: #f44336;
        }
        
        .status-testing {
            background: #ff9800;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .code-block {
            background: #1a1a1a;
            color: #f8f8f2;
            font-family: 'JetBrains Mono', monospace;
            border-radius: 8px;
            padding: 16px;
            overflow-x: auto;
        }
        
        .json-key { color: #ff79c6; }
        .json-string { color: #f1fa8c; }
        .json-number { color: #bd93f9; }
        .json-boolean { color: #50fa7b; }
        .json-null { color: #6272a4; }
    </style>
</head>
<body>
    <!-- æµ®åŠ¨ç²’å­èƒŒæ™¯ -->
    <div class="floating-particles" id="particles"></div>
    
    <!-- å¯¼èˆªæ  -->
    <nav class="bg-white/90 backdrop-blur-md shadow-sm border-b border-green-100 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-lg">ğŸ </span>
                    </div>
                    <h1 class="text-xl font-bold text-gray-800">èŠ‚èƒ½å°å±‹è®¾è®¡å¸ˆ</h1>
                </div>
                <div class="flex space-x-8">
                    <a href="index.html" class="nav-link text-gray-700 font-medium">AIåŠ©æ‰‹</a>
                    <a href="mindmap.html" class="nav-link text-gray-700 font-medium">æ€ç»´å¯¼å›¾</a>
                    <a href="resources.html" class="nav-link text-gray-700 font-medium">å­¦ä¹ èµ„æº</a>
                    <a href="api-config.html" class="nav-link text-gray-700 font-medium active">APIé…ç½®</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- HeroåŒºåŸŸ -->
    <section class="pt-8 pb-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-6">
                <h1 class="hero-title text-3xl md:text-4xl font-bold mb-3">
                    APIé…ç½®ä¸­å¿ƒ
                </h1>
                <p class="text-gray-600 max-w-2xl mx-auto">
                    é…ç½®å’Œç®¡ç†æ‚¨çš„å¤§æ¨¡å‹APIï¼Œä¸ºAIåŠ©æ‰‹æä¾›æ™ºèƒ½å¯¹è¯èƒ½åŠ›
                </p>
            </div>
        </div>
    </section>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
        <!-- APIæœåŠ¡é€‰æ‹© -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-8 flex items-center">
                <span class="mr-3">ğŸ”Œ</span>
                é€‰æ‹©AIæœåŠ¡æä¾›å•†
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- é€šä¹‰åƒé—® -->
                <div class="api-card rounded-2xl p-6 cursor-pointer" onclick="selectAPI('qianwen')">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-lg flex items-center justify-center">
                                <span class="text-white font-bold text-lg">åƒ</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">é€šä¹‰åƒé—®</h3>
                                <p class="text-sm text-gray-600">é˜¿é‡Œå·´å·´</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="status-indicator status-disconnected" id="qianwen-status"></span>
                            <span class="text-xs text-gray-500" id="qianwen-status-text">æœªè¿æ¥</span>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">é˜¿é‡Œå·´å·´æ¨å‡ºçš„è¶…å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹ï¼Œæ”¯æŒä¸­æ–‡å¯¹è¯ï¼Œé€‚åˆæ•™è‚²åœºæ™¯</p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded">ä¸­æ–‡ä¼˜åŒ–</span>
                        <span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded">æ•™è‚²åœºæ™¯</span>
                        <span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded">å¤šè½®å¯¹è¯</span>
                    </div>
                </div>
                
                <!-- OpenAI -->
                <div class="api-card rounded-2xl p-6 cursor-pointer" onclick="selectAPI('openai')">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-lg flex items-center justify-center">
                                <span class="text-white font-bold text-lg">AI</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">OpenAI</h3>
                                <p class="text-sm text-gray-600">OpenAI</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="status-indicator status-disconnected" id="openai-status"></span>
                            <span class="text-xs text-gray-500" id="openai-status-text">æœªè¿æ¥</span>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">å…¨çƒé¢†å…ˆçš„AIæ¨¡å‹æä¾›å•†ï¼ŒGPTç³»åˆ—æ¨¡å‹æ‹¥æœ‰å¼ºå¤§çš„æ¨ç†èƒ½åŠ›</p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-2 py-1 bg-green-100 text-green-700 text-xs rounded">å…¨çƒé¢†å…ˆ</span>
                        <span class="px-2 py-1 bg-green-100 text-green-700 text-xs rounded">æ¨ç†èƒ½åŠ›å¼º</span>
                        <span class="px-2 py-1 bg-green-100 text-green-700 text-xs rounded">å¤šè¯­è¨€</span>
                    </div>
                </div>
                
                <!-- æ–‡å¿ƒä¸€è¨€ -->
                <div class="api-card rounded-2xl p-6 cursor-pointer" onclick="selectAPI('wenxin')">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg flex items-center justify-center">
                                <span class="text-white font-bold text-lg">æ–‡</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">æ–‡å¿ƒä¸€è¨€</h3>
                                <p class="text-sm text-gray-600">ç™¾åº¦</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="status-indicator status-disconnected" id="wenxin-status"></span>
                            <span class="text-xs text-gray-500" id="wenxin-status-text">æœªè¿æ¥</span>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">ç™¾åº¦æ¨å‡ºçš„çŸ¥è¯†å¢å¼ºå¤§è¯­è¨€æ¨¡å‹ï¼Œæ“…é•¿ä¸­æ–‡ç†è§£å’Œç”Ÿæˆ</p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded">çŸ¥è¯†å¢å¼º</span>
                        <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded">ä¸­æ–‡ç†è§£</span>
                        <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded">åˆ›æ„ç”Ÿæˆ</span>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- APIé…ç½®è¡¨å• -->
        <section class="mb-12">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- é…ç½®è¡¨å• -->
                <div class="config-card rounded-2xl shadow-xl p-8">
                    <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                        <span class="mr-2">âš™ï¸</span>
                        APIé…ç½®è®¾ç½®
                    </h3>
                    
                    <form id="apiConfigForm" class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">APIå¯†é’¥</label>
                            <input 
                                type="password" 
                                id="apiKey" 
                                placeholder="è¯·è¾“å…¥æ‚¨çš„APIå¯†é’¥" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                            >
                            <p class="text-xs text-gray-500 mt-1">æ‚¨çš„APIå¯†é’¥å°†è¢«å®‰å…¨å­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">é…ç½®åç§°</label>
                            <input 
                                type="text" 
                                id="configName" 
                                placeholder="ä¾‹å¦‚ï¼šé€šä¹‰-è¯¾å ‚é»˜è®¤" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                            >
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">APIåŸºç¡€åœ°å€</label>
                            <input 
                                type="url" 
                                id="apiEndpoint" 
                                placeholder="/compatible-mode/v1" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                            >
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">æ¨¡å‹é€‰æ‹©</label>
                            <select 
                                id="modelSelect" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                            >
                                <option value="">è¯·é€‰æ‹©æ¨¡å‹</option>
                                <option value="qwen-turbo">é€šä¹‰åƒé—®-Turbo</option>
                                <option value="qwen-plus">é€šä¹‰åƒé—®-Plus</option>
                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                <option value="gpt-4">GPT-4</option>
                                <option value="ernie-bot">æ–‡å¿ƒä¸€è¨€</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">æ¸©åº¦å‚æ•°</label>
                            <input 
                                type="range" 
                                id="temperature" 
                                min="0" 
                                max="1" 
                                step="0.1" 
                                value="0.7" 
                                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                            >
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>ç¡®å®šæ€§</span>
                                <span id="temperatureValue">0.7</span>
                                <span>åˆ›é€ æ€§</span>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">æœ€å¤§ä»¤ç‰Œæ•°</label>
                            <input 
                                type="number" 
                                id="maxTokens" 
                                min="100" 
                                max="4000" 
                                value="2000" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                            >
                        </div>
                        
                        <div class="flex space-x-4">
                            <button 
                                type="button" 
                                onclick="testConnection()" 
                                class="flex-1 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300"
                            >
                                ğŸ”— æµ‹è¯•è¿æ¥
                            </button>
                            <button 
                                type="button" 
                                onclick="saveConfig()" 
                                class="flex-1 py-3 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-lg hover:from-green-600 hover:to-blue-700 transition-all duration-300"
                            >
                                ğŸ’¾ ä¿å­˜é…ç½®
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- é…ç½®ä¿¡æ¯å’Œä»£ç ç¤ºä¾‹ -->
                <div class="space-y-6">
                    <div class="config-card rounded-2xl shadow-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="mr-2">ğŸ—‚ï¸</span>
                            å·²ä¿å­˜çš„é…ç½®
                        </h3>
                        <div id="savedConfigs" class="space-y-2"></div>
                    </div>
                    <!-- å½“å‰é…ç½®çŠ¶æ€ -->
                    <div class="config-card rounded-2xl shadow-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="mr-2">ğŸ“Š</span>
                            å½“å‰é…ç½®çŠ¶æ€
                        </h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">æœåŠ¡æä¾›å•†:</span>
                                <span class="text-sm font-medium text-gray-800" id="currentProvider">æœªé€‰æ‹©</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">æ¨¡å‹:</span>
                                <span class="text-sm font-medium text-gray-800" id="currentModel">æœªé…ç½®</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">è¿æ¥çŠ¶æ€:</span>
                                <div class="flex items-center">
                                    <span class="status-indicator status-disconnected" id="connectionStatus"></span>
                                    <span class="text-sm text-gray-500" id="connectionStatusText">æœªè¿æ¥</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">æœ€åæµ‹è¯•:</span>
                                <span class="text-sm text-gray-500" id="lastTest">ä»æœª</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- APIä½¿ç”¨ç¤ºä¾‹ -->
                    <div class="config-card rounded-2xl shadow-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="mr-2">ğŸ’»</span>
                            APIè°ƒç”¨ç¤ºä¾‹
                        </h3>
                        <div class="code-block text-xs">
                            <div>
                                <span class="json-key">const</span> response = <span class="json-key">await</span> <span class="json-function">fetch</span>(<span class="json-string">'YOUR_API_ENDPOINT'</span>, {
                            </div>
                            <div class="ml-4">
                                <span class="json-key">method</span>: <span class="json-string">'POST'</span>,
                            </div>
                            <div class="ml-4">
                                <span class="json-key">headers</span>: {
                            </div>
                            <div class="ml-8">
                                <span class="json-string">'Content-Type'</span>: <span class="json-string">'application/json'</span>,
                            </div>
                            <div class="ml-8">
                                <span class="json-string">'Authorization'</span>: <span class="json-string">'Bearer YOUR_API_KEY'</span>
                            </div>
                            <div class="ml-4">
                                },
                            </div>
                            <div class="ml-4">
                                <span class="json-key">body</span>: <span class="json-function">JSON</span>.<span class="json-function">stringify</span>({
                            </div>
                            <div class="ml-8">
                                <span class="json-string">'model'</span>: <span class="json-string">'YOUR_MODEL'</span>,
                            </div>
                            <div class="ml-8">
                                <span class="json-string">'messages'</span>: [{
                            </div>
                            <div class="ml-12">
                                <span class="json-string">'role'</span>: <span class="json-string">'user'</span>,
                            </div>
                            <div class="ml-12">
                                <span class="json-string">'content'</span>: <span class="json-string">'èŠ‚èƒ½å°å±‹è®¾è®¡çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ'</span>
                            </div>
                            <div class="ml-8">
                                }],
                            </div>
                            <div class="ml-8">
                                <span class="json-string">'temperature'</span>: <span class="json-number">0.7</span>,
                            </div>
                            <div class="ml-8">
                                <span class="json-string">'max_tokens'</span>: <span class="json-number">2000</span>
                            </div>
                            <div class="ml-4">
                                })
                            </div>
                            <div>
                                });
                            </div>
                        </div>
                    </div>
                    
                    <!-- å¿«é€Ÿæ“ä½œ -->
                    <div class="config-card rounded-2xl shadow-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="mr-2">âš¡</span>
                            å¿«é€Ÿæ“ä½œ
                        </h3>
                        <div class="space-y-3">
                            <button 
                                onclick="loadDefaultConfig()" 
                                class="w-full py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm"
                            >
                                ğŸ“‹ åŠ è½½é»˜è®¤é…ç½®
                            </button>
                            <button 
                                onclick="clearConfig()" 
                                class="w-full py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm"
                            >
                                ğŸ—‘ï¸ æ¸…é™¤é…ç½®
                            </button>
                            <button 
                                onclick="exportConfig()" 
                                class="w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm"
                            >
                                ğŸ“¤ å¯¼å‡ºé…ç½®
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ä½¿ç”¨è¯´æ˜å’Œæ³¨æ„äº‹é¡¹ -->
        <section>
            <h2 class="text-2xl font-bold text-gray-800 mb-8 flex items-center">
                <span class="mr-3">ğŸ“–</span>
                ä½¿ç”¨è¯´æ˜
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- é…ç½®æ­¥éª¤ -->
                <div class="config-card rounded-2xl shadow-xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <span class="mr-2">ğŸ“</span>
                        é…ç½®æ­¥éª¤
                    </h3>
                    <ol class="space-y-3 text-sm text-gray-600">
                        <li class="flex items-start space-x-3">
                            <span class="flex-shrink-0 w-6 h-6 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-xs font-bold">1</span>
                            <span>é€‰æ‹©æ‚¨è¦ä½¿ç”¨çš„AIæœåŠ¡æä¾›å•†ï¼ˆæ¨èé€šä¹‰åƒé—®ï¼‰</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="flex-shrink-0 w-6 h-6 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-xs font-bold">2</span>
                            <span>åœ¨å¯¹åº”çš„è¾“å…¥æ¡†ä¸­å¡«å…¥æ‚¨çš„APIå¯†é’¥</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="flex-shrink-0 w-6 h-6 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-xs font-bold">3</span>
                            <span>è®¾ç½®APIç«¯ç‚¹URLï¼ˆå¦‚æœä½¿ç”¨é»˜è®¤ç«¯ç‚¹å¯ç•™ç©ºï¼‰</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="flex-shrink-0 w-6 h-6 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-xs font-bold">4</span>
                            <span>é€‰æ‹©åˆé€‚çš„æ¨¡å‹å’Œè°ƒæ•´å‚æ•°</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="flex-shrink-0 w-6 h-6 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-xs font-bold">5</span>
                            <span>ç‚¹å‡»"æµ‹è¯•è¿æ¥"éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="flex-shrink-0 w-6 h-6 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-xs font-bold">6</span>
                            <span>æœ€åç‚¹å‡»"ä¿å­˜é…ç½®"å®Œæˆè®¾ç½®</span>
                        </li>
                    </ol>
                </div>
                
                <!-- æ³¨æ„äº‹é¡¹ -->
                <div class="config-card rounded-2xl shadow-xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <span class="mr-2">âš ï¸</span>
                        æ³¨æ„äº‹é¡¹
                    </h3>
                    <ul class="space-y-3 text-sm text-gray-600">
                        <li class="flex items-start space-x-3">
                            <span class="text-red-500 mt-1">â€¢</span>
                            <span><strong>éšç§ä¿æŠ¤ï¼š</strong>APIå¯†é’¥ä»…å­˜å‚¨åœ¨æ‚¨çš„æœ¬åœ°æµè§ˆå™¨ä¸­ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="text-orange-500 mt-1">â€¢</span>
                            <span><strong>è´¹ç”¨æé†’ï¼š</strong>ä½¿ç”¨APIå¯èƒ½ä¼šäº§ç”Ÿè´¹ç”¨ï¼Œè¯·å‚è€ƒå„æœåŠ¡å•†çš„å®šä»·æ”¿ç­–</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="text-blue-500 mt-1">â€¢</span>
                            <span><strong>ç½‘ç»œè¦æ±‚ï¼š</strong>ç¡®ä¿æ‚¨çš„ç½‘ç»œå¯ä»¥è®¿é—®å¯¹åº”çš„APIæœåŠ¡</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="text-green-500 mt-1">â€¢</span>
                            <span><strong>å‚æ•°è°ƒèŠ‚ï¼š</strong>æ¸©åº¦å‚æ•°å½±å“å›ç­”çš„åˆ›é€ æ€§ï¼Œå»ºè®®æ•™è‚²åœºæ™¯ä½¿ç”¨0.3-0.7</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="text-purple-500 mt-1">â€¢</span>
                            <span><strong>æ¨¡å‹é€‰æ‹©ï¼š</strong>ä¸åŒæ¨¡å‹æœ‰ä¸åŒçš„èƒ½åŠ›å’Œæˆæœ¬ï¼Œè¯·æ ¹æ®éœ€æ±‚é€‰æ‹©</span>
                        </li>
                        <li class="flex items-start space-x-3">
                            <span class="text-indigo-500 mt-1">â€¢</span>
                            <span><strong>æ•…éšœæ’æŸ¥ï¼š</strong>å¦‚è¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œã€å¯†é’¥æœ‰æ•ˆæ€§å’Œé…é¢é™åˆ¶</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="bg-white/90 backdrop-blur-md border-t border-green-100 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p class="text-gray-600 text-sm">Â© 2024 èŠ‚èƒ½å°å±‹è®¾è®¡å¸ˆ - ä¸“ä¸ºåˆä¸­ç§‘å­¦æ•™è‚²è®¾è®¡çš„AIå­¦ä¹ å·¥å…·</p>
                <p class="text-gray-500 text-xs mt-2">åŸºäºç»¿è‰²ç§‘æŠ€ç†å¿µï¼ŒåŸ¹å…»ç¯ä¿åˆ›æ–°æ€ç»´</p>
            </div>
        </div>
    </footer>

    <script>
        let selectedAPI = null;
        let currentConfig = {};
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeParticles();
            loadSavedConfig();
            setupEventListeners();
            refreshProviderStatuses();
            window.addEventListener('apiConfigChanged', function(e){ currentConfig = e.detail || {}; renderSavedConfigs(); refreshProviderStatuses() })
        });
        
        // åˆ›å»ºæµ®åŠ¨ç²’å­èƒŒæ™¯
        function initializeParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 15;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                particlesContainer.appendChild(particle);
            }
        }
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // æ¸©åº¦æ»‘å—
            const temperatureSlider = document.getElementById('temperature');
            const temperatureValue = document.getElementById('temperatureValue');
            
            temperatureSlider.addEventListener('input', function() {
                temperatureValue.textContent = this.value;
            });
        }
        
        // é€‰æ‹©API
        function selectAPI(apiType) {
            selectedAPI = apiType;
            
            // æ›´æ–°UIçŠ¶æ€
            document.querySelectorAll('.api-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.api-card').classList.add('active');
            
            // æ›´æ–°è¡¨å•
            const template = ConfigManager.templates[apiType];
            if (template) {
                document.getElementById('apiEndpoint').value = template.baseURL;
                document.getElementById('modelSelect').value = template.defaultModel;
                
                // æ›´æ–°å½“å‰é…ç½®æ˜¾ç¤º
                document.getElementById('currentProvider').textContent = template.name;
                document.getElementById('currentModel').textContent = template.defaultModel;
            }
            
            showNotification(`å·²é€‰æ‹©${template.name}`, 'success');
        }
        
        // æµ‹è¯•è¿æ¥
        async function testConnection() {
            const apiKey = document.getElementById('apiKey').value;
            const baseURL = document.getElementById('apiEndpoint').value;
            const model = document.getElementById('modelSelect').value;
            const name = document.getElementById('configName').value || 'æœªå‘½åé…ç½®';
            
            if (!baseURL || !model) {
                showNotification('è¯·å¡«å†™å®Œæ•´çš„APIé…ç½®ä¿¡æ¯', 'error');
                return;
            }
            
            // æ›´æ–°çŠ¶æ€ä¸ºæµ‹è¯•ä¸­
            updateConnectionStatus('testing');
            
            try {
                const cfg = { provider: selectedAPI, apiKey, baseURL: baseURL, model, temperature: Number(document.getElementById('temperature').value||0.7), maxTokens: Number(document.getElementById('maxTokens').value||2000), name };
                const result = await ConfigManager.validateEndpoint(cfg);
                if (result.ok) {
                    updateConnectionStatus('connected');
                    setProviderConnected(selectedAPI, true);
                    document.getElementById('lastTest').textContent = new Date().toLocaleString();
                    ConfigManager.saveLastValid(cfg);
                    showNotification('APIè¿æ¥æµ‹è¯•æˆåŠŸ', 'success');
                } else if (result.code==='auth_fail') {
                    updateConnectionStatus('disconnected');
                    setProviderConnected(selectedAPI, false);
                    showNotification('è®¤è¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥APIå¯†é’¥', 'error');
                } else if (result.code==='invalid_url') {
                    updateConnectionStatus('disconnected');
                    setProviderConnected(selectedAPI, false);
                    showNotification('URLæ ¼å¼ä¸æ­£ç¡®', 'error');
                } else if (result.code==='network_error') {
                    updateConnectionStatus('disconnected');
                    setProviderConnected(selectedAPI, false);
                    showNotification('ç½‘ç»œé”™è¯¯ï¼Œæ— æ³•è®¿é—®ç«¯ç‚¹', 'error');
                } else {
                    updateConnectionStatus('disconnected');
                    setProviderConnected(selectedAPI, false);
                    showNotification('ç«¯ç‚¹ä¸å¯ç”¨æˆ–å‘ç”Ÿé”™è¯¯', 'error');
                }
            } catch (error) {
                updateConnectionStatus('disconnected');
                showNotification('æµ‹è¯•è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯', 'error');
            }
        }
        
        // ä¿å­˜é…ç½®
        function saveConfig() {
            const config = {
                provider: selectedAPI,
                apiKey: document.getElementById('apiKey').value,
                baseURL: document.getElementById('apiEndpoint').value,
                model: document.getElementById('modelSelect').value,
                temperature: Number(document.getElementById('temperature').value||0.7),
                maxTokens: Number(document.getElementById('maxTokens').value||2000),
                name: document.getElementById('configName').value || 'æœªå‘½åé…ç½®',
                headers: {}
            };
            
            if (!config.provider || !config.model || !config.endpoint) {
                showNotification('è¯·å¡«å†™å®Œæ•´çš„é…ç½®ä¿¡æ¯', 'error');
                return;
            }
            var saved = ConfigManager.saveConfig(config);
            currentConfig = saved || config;
            document.getElementById('currentProvider').textContent = ConfigManager.templates[config.provider].name;
            document.getElementById('currentModel').textContent = config.model;
            renderSavedConfigs();
            showNotification('APIé…ç½®å·²ä¿å­˜', 'success');
        }
        
        // åŠ è½½ä¿å­˜çš„é…ç½®
        function loadSavedConfig() {
            const config = ConfigManager.getActiveConfig();
            currentConfig = config || {};
            if (config && config.provider) {
                selectedAPI = config.provider;
                document.getElementById('configName').value = config.name || '';
                document.getElementById('apiKey').value = config.apiKey || '';
                document.getElementById('apiEndpoint').value = config.baseURL || config.endpoint || '';
                document.getElementById('modelSelect').value = config.model || '';
                document.getElementById('temperature').value = String(config.temperature || 0.7);
                document.getElementById('temperatureValue').textContent = String(config.temperature || 0.7);
                document.getElementById('maxTokens').value = String(config.maxTokens || 2000);
                document.getElementById('currentProvider').textContent = ConfigManager.templates[config.provider].name;
                document.getElementById('currentModel').textContent = config.model;
                const apiCard = document.querySelector(`[onclick="selectAPI('${config.provider}')"]`);
                if (apiCard) { apiCard.closest('.api-card').classList.add('active') }
                setProviderConnected(config.provider, true);
            }
            renderSavedConfigs();
        }
        
        // æ›´æ–°è¿æ¥çŠ¶æ€
        function updateConnectionStatus(status) {
            const statusElement = document.getElementById('connectionStatus');
            const statusTextElement = document.getElementById('connectionStatusText');
            
            // ç§»é™¤æ‰€æœ‰çŠ¶æ€ç±»
            statusElement.classList.remove('status-connected', 'status-disconnected', 'status-testing');
            
            switch (status) {
                case 'connected':
                    statusElement.classList.add('status-connected');
                    statusTextElement.textContent = 'å·²è¿æ¥';
                    statusTextElement.className = 'text-sm text-green-600';
                    break;
                case 'testing':
                    statusElement.classList.add('status-testing');
                    statusTextElement.textContent = 'æµ‹è¯•ä¸­...';
                    statusTextElement.className = 'text-sm text-orange-600';
                    break;
                default:
                    statusElement.classList.add('status-disconnected');
                    statusTextElement.textContent = 'æœªè¿æ¥';
                    statusTextElement.className = 'text-sm text-red-600';
            }
        }
        
        // åŠ è½½é»˜è®¤é…ç½®
        function loadDefaultConfig() {
            if (confirm('ç¡®å®šè¦åŠ è½½é»˜è®¤é…ç½®å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰é…ç½®ã€‚')) {
                const defaultConfig = {
                    provider: 'qianwen',
                    baseURL: ConfigManager.templates.qianwen.baseURL,
                    model: ConfigManager.templates.qianwen.defaultModel,
                    temperature: 0.7,
                    maxTokens: 2000
                };
                
                // æ¸…ç©ºAPIå¯†é’¥
                document.getElementById('apiKey').value = '';
                document.getElementById('apiEndpoint').value = defaultConfig.baseURL;
                document.getElementById('modelSelect').value = defaultConfig.model;
                document.getElementById('temperature').value = defaultConfig.temperature;
                document.getElementById('temperatureValue').textContent = defaultConfig.temperature;
                document.getElementById('maxTokens').value = defaultConfig.maxTokens;
                
                // é€‰æ‹©é€šä¹‰åƒé—®
                selectAPI('qianwen');
                
                showNotification('é»˜è®¤é…ç½®å·²åŠ è½½', 'success');
            }
        }
        
        // æ¸…é™¤é…ç½®
        function clearConfig() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰é…ç½®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) {
                localStorage.removeItem('apiConfig');
                currentConfig = {};
                selectedAPI = null;
                
                // æ¸…ç©ºè¡¨å•
                document.getElementById('apiConfigForm').reset();
                document.getElementById('temperatureValue').textContent = '0.7';
                
                // é‡ç½®çŠ¶æ€
                document.querySelectorAll('.api-card').forEach(card => {
                    card.classList.remove('active');
                });
                updateConnectionStatus('disconnected');
                document.getElementById('currentProvider').textContent = 'æœªé€‰æ‹©';
                document.getElementById('currentModel').textContent = 'æœªé…ç½®';
                document.getElementById('lastTest').textContent = 'ä»æœª';
                
                setProviderConnected('qianwen', false);
                setProviderConnected('openai', false);
                setProviderConnected('wenxin', false);

                showNotification('é…ç½®å·²æ¸…é™¤', 'info');
            }
        }
        
        // å¯¼å‡ºé…ç½®
        function exportConfig() {
            if (Object.keys(currentConfig).length === 0) {
                showNotification('æ²¡æœ‰å¯å¯¼å‡ºçš„é…ç½®', 'error');
                return;
            }
            
            const configToExport = { ...currentConfig };
            delete configToExport.apiKey; // å®‰å…¨è€ƒè™‘ï¼Œä¸å¯¼å‡ºAPIå¯†é’¥
            
            const data = JSON.stringify(configToExport, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'api-config.json';
            a.click();
            
            URL.revokeObjectURL(url);
            showNotification('é…ç½®å·²å¯¼å‡ºï¼ˆä¸åŒ…å«APIå¯†é’¥ï¼‰', 'success');
        }

        function renderSavedConfigs(){
            const list = ConfigManager.getConfigs();
            const container = document.getElementById('savedConfigs');
            container.innerHTML = '';
            list.forEach(function(item){
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between p-2 border rounded-lg';
                const left = document.createElement('div');
                left.className = 'text-sm';
                left.textContent = `${item.name} Â· ${item.provider} Â· ${item.model}`;
                const right = document.createElement('div');
                right.className = 'flex space-x-2';
                const useBtn = document.createElement('button');
                useBtn.className = 'px-2 py-1 bg-green-500 text-white rounded text-xs';
                useBtn.textContent = 'ä½¿ç”¨';
                useBtn.onclick = function(){ ConfigManager.setActiveConfigById(item.id); showNotification('å·²åˆ‡æ¢åˆ°æ‰€é€‰é…ç½®', 'success') };
                const delBtn = document.createElement('button');
                delBtn.className = 'px-2 py-1 bg-red-500 text-white rounded text-xs';
                delBtn.textContent = 'åˆ é™¤';
                delBtn.onclick = function(){ ConfigManager.deleteConfig(item.id); renderSavedConfigs(); showNotification('é…ç½®å·²åˆ é™¤', 'info') };
                right.appendChild(useBtn); right.appendChild(delBtn);
                div.appendChild(left); div.appendChild(right);
                container.appendChild(div);
            })
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-blue-500'
            } text-white`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // åŠ¨ç”»æ˜¾ç¤º
            anime({
                targets: notification,
                translateX: [300, 0],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutQuart'
            });
            
            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
            setTimeout(() => {
                anime({
                    targets: notification,
                    translateX: [0, 300],
                    opacity: [1, 0],
                    duration: 300,
                    easing: 'easeInQuart',
                    complete: () => {
                        notification.remove();
                    }
                });
            }, 3000);
        }
    </script>
</body>
</html>
        function setProviderConnected(provider, connected){
            var idMap = { qianwen: ['qianwen-status','qianwen-status-text'], openai: ['openai-status','openai-status-text'], wenxin: ['wenxin-status','wenxin-status-text'] }
            var ids = idMap[provider]
            if(!ids) return
            var el = document.getElementById(ids[0])
            var txt = document.getElementById(ids[1])
            el.classList.remove('status-connected','status-disconnected','status-testing')
            if(connected){ el.classList.add('status-connected'); txt.textContent='å·²è¿æ¥'; txt.className='text-xs text-green-600' } else { el.classList.add('status-disconnected'); txt.textContent='æœªè¿æ¥'; txt.className='text-xs text-red-600' }
        }

        function refreshProviderStatuses(){
            var last = ConfigManager.getLastValid() || {}
            setProviderConnected('qianwen', last.provider==='qianwen')
            setProviderConnected('openai', last.provider==='openai')
            setProviderConnected('wenxin', last.provider==='wenxin')
        }
